### Практична - виправлення файлу

### Мета 
Виконати - https://play.picoctf.org/practice/challenge/519

### Хід роботи

1. Для початку ми повинні завантажити файл за допомогою curl

    ```bash
    $ curl https://challenge-files.picoctf.net/c_amiable_citadel/bdd976098377529fe779dbd31b424f69e51327b5ba68fd247dfcc074f0684141/file > file
    ```

1. Перевіримо тим нашого файлу

    ```bash
    $ file file
    file: data
    ```

1. Це означає що наш файл містить виключно бінару інформацію і **file** не знає її формат. Тому використаємо бінарний редактор **xxd**, але виведемо лише 10 перших рядків через команду **head**

    ```bash
    $ xxd file | head -10
    00000000: 5c78 ffe0 0010 4a46 4946 0001 0100 0001  \x....JFIF......
    00000010: 0001 0000 ffdb 0043 0008 0606 0706 0508  .......C........
    00000020: 0707 0709 0908 0a0c 140d 0c0b 0b0c 1912  ................
    00000030: 130f 141d 1a1f 1e1d 1a1c 1c20 242e 2720  ........... $.' 
    00000040: 222c 231c 1c28 3729 2c30 3134 3434 1f27  ",#..(7),01444.'
    00000050: 393d 3832 3c2e 3334 32ff db00 4301 0909  9=82<.342...C...
    00000060: 090c 0b0c 180d 0d18 3221 1c21 3232 3232  ........2!.!2222
    00000070: 3232 3232 3232 3232 3232 3232 3232 3232  2222222222222222
    00000080: 3232 3232 3232 3232 3232 3232 3232 3232  2222222222222222
    00000090: 3232 3232 3232 3232 3232 3232 3232 ffc0  22222222222222..
    ```

    Проаналізуємо їх. Введемо в пошук фразу JFIF.

    Отримаємо - https://en.wikipedia.org/wiki/JPEG_File_Interchange_Format

    Отже наш файл можлво є картинкою, потрібно дізнатися чому file цього не визначив

1. Припустимо що наш файл має пошкодження десь на початку. Використаємо https://yasoob.me/posts/understanding-and-writing-jpeg-decoder-in-python/ (а саме картинку з описом зображення) щоб дізнатися формат початку зображення.

    З формату заголовку видно що наше зображення має неправильні перші два байти - 5с78

1. Давайте замінимо їх. Для початку потрібно перетворити бінарний файл в текстовий 

    ```bash
    $ xxd file > file.txt
    ```

1. Відкриваємо файл через текстовий редактор - заміняємо перші невірні цифри та зберігаємо.

    ```bash
    $ nano file.txt
    ```

1. Виконуємо зворотнє перетворення

    ```bash
    $ xxd -r file.txt > file2
    ```

1. Перевіряємо файл через **file**

    ```bash
    $ file file2
    file2: JPEG image data, JFIF standard 1.01, aspect ratio, density 1x1, segment length 16, baseline, precision 8, 800x500, components 3
    ```

1. Завантажуємо файл з серверу на локальний комп'ютер. Відкриваємо його та переглядаємо прапорець

    ```bash
    $ sz file2
    ```