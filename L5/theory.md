
# Огляд комп'ютерного обладнання

Опісля теорії - [Практична робота](pc-log-hunt.md) 

---

Операційна система (ОС) тісно взаємодіє з апаратним забезпеченням комп'ютера. Вона розширює набір команд комп'ютера та керує його ресурсами. Для розуміння роботи ОС необхідно знати будову сучасного персонального комп'ютера.

Спрощено персональний комп'ютер складається з центрального процесора (ЦП), пам'яті та пристроїв вводу/виводу. Всі ці компоненти з'єднані між собою системною шиною, через яку відбувається обмін даними.

## Процесори

**Центральний процесор (ЦП)** здійснює обробку даних у комп'ютері. Його основний цикл роботи складається з трьох етапів:
1.  **Отримання:** Процесор зчитує команду з пам'яті.
2.  **Декодування:** Визначає тип команди та операнди.
3.  **Виконання:** Виконує операцію та переходить до наступної команди.

Кожен тип процесорів має свій набір інструкцій (наприклад, x86 або ARM), тому програми, написані для одного типу, не можуть виконуватися на іншому без адаптації.

### Регістри
Оскільки доступ до оперативної пам'яті займає більше часу, ніж виконання команди, процесори мають власну, дуже швидку пам'ять — **регістри**. У них зберігаються змінні та тимчасові результати.
Основні типи регістрів:
* **Лічильник команд (Program Counter):** Містить адресу наступної інструкції, яку потрібно виконати.
* **Вказівник стека (Stack Pointer):** Вказує на вершину поточного стека в пам'яті, що використовується для керування викликами процедур.
* **Слово стану програми (PSW):** Містить біти кодів умов, пріоритет процесора та режим роботи (користувача або ядра).

### Режими роботи процесора
Більшість процесорів підтримує два режими роботи:
1.  **Режим ядра:** Операційна система має повний доступ до всіх інструкцій та апаратного забезпечення.
2.  **Режим користувача:** Прикладні програми (браузери, текстові редактори) працюють в обмеженому режимі. Вони не мають прямого доступу до обладнання. Для виконання операцій з обладнанням програма робить **системний виклик** (system call), який передає керування операційній системі.

### Підвищення продуктивності
* **Конвеєр (Pipeline):** Дозволяє процесору одночасно виконувати, декодувати та зчитувати різні інструкції, що пришвидшує роботу.
* **Суперскалярна архітектура:** Наявність кількох виконавчих блоків дозволяє виконувати більше однієї інструкції за один такт.
* **Багатопотоковість (Multithreading):** Дозволяє одному ядру процесора зберігати стан двох потоків виконання і швидко перемикатися між ними.
* **Багатоядерність:** Розміщення кількох повних процесорів (ядер) на одному кристалі.

## Пам'ять

Система пам'яті побудована за ієрархічним принципом: від найшвидшої та найдорожчої до повільнішої, але дешевшої.

1.  **Регістри:** Знаходяться всередині ЦП, доступ до них миттєвий.
2.  **Кеш-пам'ять (L1, L2):** Швидка пам'ять, що зберігає часто використовувані дані. Якщо потрібні дані є в кеші (*cache hit*), процесору не потрібно звертатися до повільнішої основної пам'яті.
3.  **Основна пам'ять (ОЗП або RAM):** Оперативний запам'ятовуючий пристрій. Тут зберігаються активні програми та дані. Вона є енергозалежною (втрачає дані при вимкненні живлення).
4.  **Енергонезалежна пам'ять:**
    * **ROM (ПЗП):** Пам'ять лише для читання, програмується на заводі.
    * **Flash-пам'ять:** Може перезаписуватися, використовується в SSD та USB-накопичувачах.
    * **CMOS:** Живиться від батарейки на материнській платі, зберігає поточний час і налаштування конфігурації.

## Диски

Диски використовуються для довготривалого зберігання великих обсягів інформації.

* **Магнітні жорсткі диски (HDD):** Механічні пристрої, що складаються з пластин, які обертаються, та головок для зчитування/запису. Дані записуються на концентричні доріжки, поділені на сектори. Час доступу залежить від швидкості обертання та переміщення головки.
* **Твердотільні накопичувачі (SSD):** Використовують флеш-пам'ять, не мають рухомих частин і забезпечують значно швидший доступ до даних.

**Віртуальна пам'ять** — механізм, що дозволяє запускати програми, розмір яких перевищує обсяг фізичної оперативної пам'яті. Частина даних переміщується на диск, а блок керування пам'яттю (MMU) транслює віртуальні адреси у фізичні.

## Пристрої вводу/виводу

Пристрої вводу/виводу (клавіатура, монітор, принтер тощо) складаються з двох частин:
1.  **Сам пристрій:** Виконує фізичну роботу.
2.  **Контролер:** Електронний блок, який керує пристроєм і взаємодіє з операційною системою.

Програмне забезпечення, що керує контролером, називається **драйвером пристрою**. Драйвер завантажується в операційну систему і працює в режимі ядра.

**Методи обміну даними:**
1.  **Активне очікування (Busy waiting):** ЦП постійно опитує контролер про стан завершення операції, що неефективно витрачає час процесора.
2.  **Переривання (Interrupt):** Коли пристрій завершує роботу, контролер надсилає сигнал переривання. ЦП призупиняє поточну програму, обробляє сигнал і потім повертається до роботи.
3.  **Прямий доступ до пам'яті (DMA):** Спеціальний контролер DMA керує передачею даних між пристроєм і пам'яттю без участі ЦП, генеруючи переривання лише після завершення всього блоку передачі.

## Шини

Шини забезпечують передачу даних між компонентами комп'ютера. У сучасних системах використовується кілька типів шин:

* **PCIe (PCI Express):** Високошвидкісна послідовна шина типу «точка-точка». Використовує виділені лінії передачі даних (lanes). Застосовується для підключення відеокарт, мережевих адаптерів та швидких накопичувачів.
* **USB (Universal Serial Bus):** Універсальна послідовна шина для підключення зовнішніх пристроїв. Підтримує гаряче підключення (без перезавантаження) і забезпечує живлення пристроїв.
* **SATA:** Послідовна шина для підключення накопичувачів (жорстких дисків, SSD).

Технологія **Plug and Play** дозволяє системі автоматично виявляти підключені пристрої, призначати їм ресурси (переривання, адреси портів) та завантажувати необхідні драйвери.

## Завантаження комп'ютера

Процес завантаження (booting) відбувається наступним чином:
1.  Після ввімкнення живлення запускається **BIOS** (базова система вводу-виводу).
2.  BIOS виконує тестування обладнання та визначає перелік підключених пристроїв.
3.  Визначається завантажувальний пристрій (диск, флеш-накопичувач).
4.  Зчитується перший сектор завантажувального пристрою, де знаходиться завантажувач.
5.  Завантажувач зчитує ядро операційної системи в пам'ять і передає йому керування.
6.  ОС ініціалізує драйвери, налаштовує середовище та запускає інтерфейс користувача.
